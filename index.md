## Welcome to the go-ms community

[![Build Status](https://travis-ci.com/yadisnel/protoc-gen-go-ms.svg?branch=master)](https://travis-ci.com/yadisnel/protoc-gen-go-ms)
[![License](https://img.shields.io/:license-apache-blue.svg)](https://opensource.org/licenses/Apache-2.0)

Here you will find documentation about the `proto-gen-go-ms` plugin. This is protobuf code generation for go-ms. We use `protoc-gen-go-ms` to reduce boilerplate code.

### Install

Use the go get command to install the `protoc-gen-go-ms` binary:

```markdown
go get github.com/yadisnel/protoc-gen-go-ms/v2
```

### Usage

#### Define your service as `greeter.proto`:
```markdown
syntax = "proto3";

service Greeter {
	rpc Hello(Request) returns (Response) {}
}

message Request {
	string name = 1;
}

message Response {
	string msg = 1;
}

```

#### Generate the code:
```markdown
protoc --proto_path=$GOPATH/src:. --go-ms_out=. --go_out=. greeter.proto
```

Your output result should be:
```markdown
./
    greeter.proto	# original protobuf file
    greeter.pb.go	# auto-generated by protoc-gen-go
    greeter.pb.go.ms.go	# auto-generated by protoc-gen-go-ms
```
The `go-ms` generated code includes clients and handlers which reduce boiler plate code.

#### Server

Register the handler with your `go-ms` server:

```markdown
type Greeter struct{}

func (g *Greeter) Hello(ctx context.Context, req *proto.Request, rsp *proto.Response) error {
	rsp.Msg = "Hello " + req.Name
	return nil
}

proto.RegisterGreeterHandler(service.Server(), &Greeter{})
```

#### Client

Create a service client with your go-ms client

```markdown
client := proto.NewGreeterService("greeter", service.Client())
```

#### Errors

If you see an error about `protoc-gen-go-ms` not being found or executable, it's likely your environment may not be configured correctly. If you've already installed protoc, `protoc-gen-go`, and `protoc-gen-go-ms` ensure you've included $GOPATH/bin in your PATH.

Alternative specify the Go plugin paths as arguments to the `protoc` command

```markdown
protoc --plugin=protoc-gen-go=$GOPATH/bin/protoc-gen-go \
--plugin=protoc-gen-go-ms=$GOPATH/bin/protoc-gen-go-ms \
--proto_path=$GOPATH/src:. --go-ms_out=. --go_out=. greeter.proto
```

### License
`protoc-gen-go-ms` is a liberal reuse of `protoc-gen-go` hence we maintain the original license.












